# Mejiro31 の使い方

![](./imgs/5.Both_parallel.JPG)

## 目次
  1. [キーレイアウト](#キーレイアウト)
    - [QWERTY レイヤー](#qwerty-レイヤー)
    - [GEMINI レイヤー](#gemini-レイヤー)
    - [NUMBER レイヤー](#number-レイヤー)
    - [FUNCTION レイヤー](#function-レイヤー)
  2. [キーの入れ替え方](#キーの入れ替え方) 
  3. [高度なカスタム](#高度なカスタム)

## キーレイアウト

デフォルトではこのようなキー配置になっています。

### QWERTY レイヤー
![](./imgs/layer_QWERTY.png)
QWERTY レイヤーは標準のレイヤーです。

Mejiro31 を接続したときは毎回このレイヤーでスタートします。

[二段圧縮](https://note.com/jeebis_keyboard/n/ncbc327906050)を使用しており、キーの $1/3$ は同指の隣接キーの同時押しで入力します。

![](./imgs/二段圧縮.png)

もし QWERTY ではなく、Dvorakや大西配列のような代替レイアウトを使用したい場合は[高度なカスタム](#高度なカスタム)の章をご覧ください。

また、左右のスペースバーはそれぞれ Space と Enter ですが、長押しで Shift キーとして動作します。

真ん中のレイヤーキーを短く押すと GEMINI レイヤーに切り替わり、長押しで NUMBER レイヤーに切り替わります。

### GEMINI レイヤー
![](./imgs/layer_GEMINI.png)
GEMINI レイヤーはメジロ式を使うために必要なレイヤーです。

メジロ式を動かす Plover というソフト専用の出力が割り当たっています。

なので、基本的にこのキー配置を変更することはありません。

急にキーボードが入力できなくなったときは GEMINI レイヤーになってしまっていないかご確認ください。

真ん中のレイヤーキーを短く押すと QWERTY レイヤーに切り替わり、長押しで NUMBER レイヤーに切り替わります。

### NUMBER レイヤー
![](./imgs/layer_NUMBER.png)
NUMBER レイヤーには数字キーや矢印キー、 Windows キー、その他機能キーが割り当たっています。

0 の上のキーは 00 キーで、二つの 0 を出力します。

一番右の、上段のキーは代替レイアウトの有効・無効を切りかえるキーで、下段のキーは長押しで FUNCTION レイヤーに遷移するキーです。

ただし、デフォルトの設定では代替レイアウトキーは無効になっています。それは代替レイアウトが定義されていないからです。代替レイアウトを有効化したい場合は[高度なカスタム](#高度なカスタム)の章をご覧ください。

### FUNCTION レイヤー
![](./imgs/layer_FUNCTION.png)
FUNCTION レイヤーには F1 ~ F13 キーやメディアキーが割り当たっています。

一番右の、上段のキーは PC のキーボード設定が JIS でも US キーボードとして入力できるモードの切り替えキーです。

Mejiro31 は US キーボードとして出力するので、 PC が JIS レイアウトの時はこのモードをオンにしないと設定どおりの出力になりません。

ただし、PC 側のショートカットキーは JIS のままなのでお気を付けください。

## キーの入れ替え方

まずはこちらのファイルをダウンロードします。
- [mejiro31_via_keymap.json](https://github.com/JEEBIS27/Mejiro31/releases/latest/download/mejiro31_via_keymap.json)

次に、お好きなブラウザーから`VIA`にアクセスして、 DESIGN を選びます。

(以下のリンクからアクセスすると自動で DESIGN の画面に遷移します。)

- [VIA/DESIGN](https://www.usevia.app/design)

![](./imgs/via_design.png)

DESIGN タブを開いたら`Load`ボタンを押します。

![](./imgs/via_load.png)

ここで先ほどダウンロードした JSON ファイルを選択し、正常に読み込まれると以下の画像のようにレイアウトが表示されます。

![](./imgs/via_loaded.png)

JSON ファイルの読み込みが完了後、 CONFIGURE タブに移動します。

![](./imgs/via_configure.png)

CONFIGURE タブの`Authorize device`ボタンを押し、ポップアップ画面で Mejiro31 を選択して接続します。

![](./imgs/via_select_keyboard.png)

するとキーマップ編集画面に遷移するので、キーボードのキーをクリックし変更したいキーを下から選んでクリックすることでキーを入れ替えることができます。

![](./imgs/via_QWERTY.png)

(VIA からだと上下キーの同時押しの再定義ができません。なので事実上変えることができるのは NUMBER レイヤーや FUNCTION レイヤーのキーだけです。もし Dvorak や大西配列のような代替レイアウトを使用したい場合は[高度なカスタム](#高度なカスタム)の章をご覧ください。)

## 高度なカスタム

### 目次
  1. [高度なカスタムを行う方法](#高度なカスタムを行う方法)
     1. [ファームウェアリポジトリをフォークする](#ファームウェアリポジトリをフォークする)
     2. [ファームウェアのビルド環境構築方法](#ファームウェアのビルド環境構築方法)
  2. [高度なカスタムの紹介](#高度なカスタムの紹介)

Mejiro31 は高度なカスタムとして、 QMK ファームウェアの設定を変更することでより細かい需要にこたえることができます。

### 高度なカスタムを行う方法

高度なカスタムを行うためには Mejiro31 のファームウェアリポジトリをあなたのアカウントでフォークし、ビルド環境を構築していただく必要があります。

### ファームウェアリポジトリをフォークする

[github.com](https://github.com/) にアクセスします。

![](./imgs/github_home.png)

github アカウントを持っていない場合はここでサインアップして新しく作成してください。

アカウントを作成したら、以下のリンクから Mejiro31 のファームウェアリポジトリにアクセスします。
- [Mejiro31 Firmware Repository](https://github.com/JEEBIS27/qmk_firmware)

![](./imgs/mejiro31_firmware_repo.png)
### ファームウェアのビルド環境構築方法

ここでは紹介しませんが、以下の説明が参考になると思います。

- [QMKファームウェアビルド構築手順(Windows QMK MSYS編)](https://gist.github.com/e3w2q/4bc86e531d1c893d3d13af3e9895a94a)
- [MacでのQMKファームウェアビルド構築方法の参考記事](https://qiita.com/Nikk0r0/items/4089c194715185a124a5)

### 高度なカスタムの紹介



[スタートページに戻る](../readme.md)
